(()=>{"use strict";var e={537:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.loadAdditionalAssets=a.loadInitialAssets=void 0;const s=t(496);async function r(e,a,t,r,i){const o=await s.workspace.fs.readFile(s.Uri.joinPath(t,"template",r)),n=i||r;e.writeFile(s.Uri.joinPath(a,n),o,{create:!0,overwrite:!1})}async function i(e,a,t,r,i){const o=await fetch(s.Uri.joinPath(s.Uri.parse(t),r).toString()),n=await o.arrayBuffer(),c=i||r;e.writeFile(s.Uri.joinPath(a,c),new Uint8Array(n),{create:!0,overwrite:!1})}a.loadInitialAssets=async function(e,a,t){const i=[];i.push(r(e,a,t,"main.html")),i.push(r(e,a,t,"README.md")),e.createDirectory(s.Uri.joinPath(a,".vscode")),i.push(r(e,a,t,".vscode/tasks.json")),e.createDirectory(s.Uri.joinPath(a,"src")),i.push(r(e,a,t,"src/Main.cpp")),e.createDirectory(s.Uri.joinPath(a,"include")),await Promise.all(i)},a.loadAdditionalAssets=async function(e,a){const t=[],r=s.workspace.getConfiguration("siv3d-playground").get("siv3d-assets-download-url");t.push(i(e,a,r,"lib/Siv3D.wasm","Siv3D.wasm")),t.push(i(e,a,r,"lib/Siv3D.js","Siv3D.js")),t.push(i(e,a,r,"lib/Siv3D.data","Siv3D.data")),await Promise.all(t),e.createDirectory(s.Uri.joinPath(a,"example")),t.push(i(e,a,r,"example/windmill.png")),t.push(i(e,a,r,"example/example/particle.png")),e.createDirectory(s.Uri.joinPath(a,"example/geojson")),t.push(i(e,a,r,"example/geojson/countries.geojson")),e.createDirectory(s.Uri.joinPath(a,"example/texture")),t.push(i(e,a,r,"example/texture/uv.png")),t.push(i(e,a,r,"example/texture/grass.jpg")),t.push(i(e,a,r,"example/texture/rock.jpg")),t.push(i(e,a,r,"example/texture/ground.jpg")),t.push(i(e,a,r,"example/texture/earth.jpg")),e.createDirectory(s.Uri.joinPath(a,"example/shader")),e.createDirectory(s.Uri.joinPath(a,"example/shader/essl")),t.push(i(e,a,r,"example/shader/essl/terrain_forward.vert")),t.push(i(e,a,r,"example/shader/essl/terrain_forward.frag")),t.push(i(e,a,r,"example/shader/essl/terrain_normal.frag")),e.createDirectory(s.Uri.joinPath(a,"example/obj")),t.push(i(e,a,r,"example/obj/blacksmith.obj")),t.push(i(e,a,r,"example/obj/mill.obj")),t.push(i(e,a,r,"example/obj/tree.obj")),t.push(i(e,a,r,"example/obj/pine.obj")),await Promise.all(t)}},496:e=>{e.exports=require("vscode")}},a={};function t(s){var r=a[s];if(void 0!==r)return r.exports;var i=a[s]={exports:{}};return e[s](i,i.exports,t),i.exports}var s={};(()=>{var e=s;Object.defineProperty(e,"__esModule",{value:!0}),e.activate=void 0;const a=t(496),r=t(537);async function i(e,t,s){const i=s.path.split("/").slice(1);try{await t.stat(s)}catch(e){if(!(e instanceof a.FileSystemError))throw e;for(let e=1;e<=i.length;e++){const a=s.with({path:"/"+i.slice(0,e).join("/")});await t.createDirectory(a)}}if(i.length>0&&"gist"===i[0]){const e=a.Uri.parse(`gist://${i.slice(1).join("/")}/`),t=a.extensions.getExtension("vsls-contrib.gistfs");t.isActive||await t.activate(),await a.workspace.fs.copy(e,s,{overwrite:!0})}else await(0,r.loadInitialAssets)(t,s,e.extensionUri),a.commands.executeCommand("vscode.open",a.Uri.joinPath(s,"src/Main.cpp"),{preview:!1});await(0,r.loadAdditionalAssets)(t,s)}e.activate=async function(e){let t;e.subscriptions.push(a.commands.registerCommand("siv3d-playground.compile.run",(async()=>{const e=new Promise(((e,a)=>{t=e}));if(a.commands.executeCommand("workbench.action.tasks.runTask","emcc build"),0===await e){const e=a.workspace.workspaceFolders&&a.workspace.workspaceFolders.length>0?a.workspace.workspaceFolders[0].uri:void 0;a.commands.executeCommand("emcc.preview.show",a.Uri.joinPath(e,"main.html"),"Siv3D Preview")}t=null}))),a.tasks.onDidEndTaskProcess((e=>{"emcc build"==e.execution.task.name&&t&&t(e.exitCode)}));const s=a.extensions.getExtension("kamenokosoft.wasm-playground");let r;r=s.isActive?s.exports:await s.activate();const o=r.memFs,n=a.workspace.workspaceFolders&&a.workspace.workspaceFolders.length>0?a.workspace.workspaceFolders[0]:void 0;n&&i(e,o,n.uri),a.workspace.onDidChangeWorkspaceFolders((a=>{for(const t of a.added)i(e,o,t.uri)}))}})(),module.exports=s})();
//# sourceMappingURL=extension.js.map