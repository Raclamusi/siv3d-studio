(()=>{"use strict";var e={537:(e,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.loadAdditionalAssets=a.loadInitialAssets=void 0;const s=r(496);async function o(e,a,r,o,t){const i=await s.workspace.fs.readFile(s.Uri.joinPath(r,"template",o)),n=t||o;e.writeFile(s.Uri.joinPath(a,n),i,{create:!0,overwrite:!1})}async function t(e,a,r,o,t){const i=await fetch(s.Uri.joinPath(s.Uri.parse(r),o).toString()),n=await i.arrayBuffer(),c=t||o;e.writeFile(s.Uri.joinPath(a,c),new Uint8Array(n),{create:!0,overwrite:!1})}a.loadInitialAssets=async function(e,a,r){const t=[];t.push(o(e,a,r,"main.html")),t.push(o(e,a,r,"README.md")),e.createDirectory(s.Uri.joinPath(a,".vscode")),t.push(o(e,a,r,".vscode/tasks.json")),e.createDirectory(s.Uri.joinPath(a,"src")),t.push(o(e,a,r,"src/Main.cpp")),e.createDirectory(s.Uri.joinPath(a,"include")),await Promise.all(t)},a.loadAdditionalAssets=async function(e,a){const r=[],o=s.workspace.getConfiguration("siv3d-playground").get("siv3d-assets-download-url");r.push(t(e,a,o,"lib/Siv3D.wasm","Siv3D.wasm")),r.push(t(e,a,o,"lib/Siv3D.js","Siv3D.js")),r.push(t(e,a,o,"lib/Siv3D.data","Siv3D.data")),await Promise.all(r),e.createDirectory(s.Uri.joinPath(a,"example")),r.push(t(e,a,o,"example/windmill.png")),r.push(t(e,a,o,"example/example/particle.png")),e.createDirectory(s.Uri.joinPath(a,"example/geojson")),r.push(t(e,a,o,"example/geojson/countries.geojson")),e.createDirectory(s.Uri.joinPath(a,"example/texture")),r.push(t(e,a,o,"example/texture/uv.png")),r.push(t(e,a,o,"example/texture/grass.jpg")),r.push(t(e,a,o,"example/texture/rock.jpg")),r.push(t(e,a,o,"example/texture/ground.jpg")),r.push(t(e,a,o,"example/texture/earth.jpg")),e.createDirectory(s.Uri.joinPath(a,"example/shader")),e.createDirectory(s.Uri.joinPath(a,"example/shader/essl")),r.push(t(e,a,o,"example/shader/essl/terrain_forward.vert")),r.push(t(e,a,o,"example/shader/essl/terrain_forward.frag")),r.push(t(e,a,o,"example/shader/essl/terrain_normal.frag")),e.createDirectory(s.Uri.joinPath(a,"example/obj")),r.push(t(e,a,o,"example/obj/blacksmith.obj")),r.push(t(e,a,o,"example/obj/mill.obj")),r.push(t(e,a,o,"example/obj/tree.obj")),r.push(t(e,a,o,"example/obj/pine.obj")),await Promise.all(r)}},496:e=>{e.exports=require("vscode")}},a={};function r(s){var o=a[s];if(void 0!==o)return o.exports;var t=a[s]={exports:{}};return e[s](t,t.exports,r),t.exports}var s={};(()=>{var e=s;Object.defineProperty(e,"__esModule",{value:!0}),e.activate=void 0;const a=r(496),o=r(537);async function t(e,r,s){const t=s.uri;await(0,o.loadInitialAssets)(r,t,e.extensionUri),a.commands.executeCommand("vscode.open",a.Uri.joinPath(t,"src/Main.cpp"),{preview:!1}),await(0,o.loadAdditionalAssets)(r,t)}e.activate=async function(e){if("object"==typeof navigator){let r;e.subscriptions.push(a.commands.registerCommand("siv3d-playground.compile.run",(async()=>{const e=new Promise(((e,a)=>{r=e}));if(a.commands.executeCommand("workbench.action.tasks.runTask","emcc build"),0===await e){const e=a.workspace.workspaceFolders&&a.workspace.workspaceFolders.length>0?a.workspace.workspaceFolders[0].uri:void 0;a.commands.executeCommand("emcc.preview.show",a.Uri.joinPath(e,"main.html"),"Siv3D Preview")}r=null}))),a.tasks.onDidEndTaskProcess((e=>{"emcc build"==e.execution.task.name&&r&&r(e.exitCode)}));const s=a.extensions.getExtension("kamenokosoft.wasm-playground");let o;o=s.isActive?s.exports:await s.activate();const i=o.memFs,n=a.Uri.parse("memfs:/siv3d-playground");i.createDirectory(n);const c=a.workspace.workspaceFolders&&a.workspace.workspaceFolders.length>0?a.workspace.workspaceFolders[0]:void 0;c&&t(e,i,c),a.workspace.onDidChangeWorkspaceFolders((a=>{for(const r of a.added)t(e,i,r)}))}}})(),module.exports=s})();
//# sourceMappingURL=extension.js.map